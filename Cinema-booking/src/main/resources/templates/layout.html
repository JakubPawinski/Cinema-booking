<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title layout:title-pattern="$CONTENT_TITLE - Cinema Booking">Cinema Booking</title>

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800&family=Playfair+Display:ital,wght@1,700&display=swap" rel="stylesheet">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            cinema: {
              black: '#0a0a0a',   // Very dark background
              dark: '#141414',    // Card background
              accent: '#9333ea',  // Purple (Primary)
              accentHover: '#7e22ce', // Dark purple (Hover)
              gold: '#fbbf24',    // Gold accents
              text: '#e0e0e0'     // Light text
            }
          },
          fontFamily: {
            sans: ['Montserrat', 'sans-serif'],
            serif: ['Playfair Display', 'serif'],
          }
        }
      },
      // Important: this allows Tailwind to override Bootstrap styles where needed
      corePlugins: {
        preflight: false,
      }
    }
  </script>

  <style>
    /* Global fixes */
    body {
      background-color: #0a0a0a;
      color: #ffffff;
      font-family: 'Montserrat', sans-serif;
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #141414; }
    ::-webkit-scrollbar-thumb { background: #2f2f2f; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #9333ea; }

    /* Bootstrap/Tailwind conflict fixes */
    a { text-decoration: none; color: inherit; }
    a:hover { color: inherit; }
    .dropdown-toggle::after { vertical-align: middle; }

    /* Navbar Sticky Background */
    .navbar-scrolled {
      background-color: rgba(10, 10, 10, 0.95);
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 20px rgba(147, 51, 234, 0.15);
    }

    /* Remove default button focus outline for cleaner look */
    button:focus {
      outline: none;
    }
  </style>
</head>
<body class="flex flex-col min-h-screen">

<nav id="mainNav" class="fixed w-full z-50 transition-all duration-300 border-b border-white/5 py-4">
  <div class="container mx-auto px-6 flex justify-between items-center">

    <a href="/" class="text-2xl md:text-3xl font-serif font-bold italic tracking-wider flex items-center gap-2 group">
      <i class="fas fa-film text-cinema-accent group-hover:rotate-12 transition transform"></i>
      <span class="text-white">CINEMA</span><span class="text-cinema-accent drop-shadow-[0_0_8px_rgba(147,51,234,0.5)]">BOOKING</span>
    </a>

    <div sec:authorize="isAuthenticated()" class="hidden md:flex items-center space-x-8 text-sm font-semibold uppercase tracking-wide">
      <a href="/movies" class="text-gray-300 hover:text-cinema-accent transition relative group">
        Movies
        <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-cinema-accent transition-all group-hover:w-full"></span>
      </a>

      <a sec:authorize="hasRole('ADMIN')" href="/admin" class="text-cinema-gold hover:text-white transition flex items-center gap-2">
        <i class="fas fa-shield-alt"></i> Admin Panel
      </a>
    </div>

    <div class="flex items-center gap-4">

      <div sec:authorize="!isAuthenticated()" class="flex gap-4">
        <a href="/login" class="bg-cinema-accent hover:bg-cinema-accentHover text-white px-5 py-2 rounded-full font-bold text-sm transition transform hover:scale-105 shadow-lg shadow-purple-900/40">
          Login
        </a>
      </div>

      <div sec:authorize="isAuthenticated()" class="dropdown">
        <!-- ZMIANA: Dodano klasy bg-transparent i border-0, aby usunąć domyślne szare tło przycisku -->
        <button class="bg-transparent border-0 flex items-center gap-2 text-white hover:text-cinema-accent transition dropdown-toggle" type="button" data-bs-toggle="dropdown">
          <span class="font-semibold hidden sm:inline" sec:authentication="name">User</span>
        </button>
        <ul class="dropdown-menu dropdown-menu-dark bg-cinema-dark border border-gray-700 shadow-2xl mt-3">
          <li><a class="dropdown-item hover:bg-cinema-accent" href="#">My Tickets</a></li>
          <li><a class="dropdown-item hover:bg-cinema-accent" href="#">Settings</a></li>
          <li><hr class="dropdown-divider border-gray-700"></li>
          <li>
            <form th:action="@{/logout}" method="post">
              <button type="submit" class="dropdown-item text-red-400 hover:bg-red-900/30">Logout</button>
            </form>
          </li>
        </ul>
      </div>

    </div>
  </div>
</nav>

<main class="flex-grow">
  <div layout:fragment="content">
  </div>
</main>

<footer class="bg-black border-t border-gray-900 pt-16 pb-8 mt-auto">
  <div class="container mx-auto px-6">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-12 mb-12">
      <div>
        <a href="#" class="text-2xl font-serif font-bold italic tracking-wider mb-6 block">
          <span class="text-white">CINEMA</span><span class="text-cinema-accent">BOOKING</span>
        </a>
        <p class="text-gray-500 text-sm leading-relaxed">
          The best image and sound quality in the city. Experience emotions in a dimension you've never known before.
        </p>
      </div>
      <div>
        <h4 class="text-white font-bold uppercase mb-6 text-sm tracking-wider">Quick Links</h4>
        <ul class="space-y-3 text-gray-500 text-sm">
          <li><a href="#" class="hover:text-cinema-accent transition">Movies</a></li>
          <li><a href="#" class="hover:text-cinema-accent transition">Promotions</a></li>
        </ul>
      </div>
      <div>
        <h4 class="text-white font-bold uppercase mb-6 text-sm tracking-wider">Contact</h4>
        <ul class="space-y-3 text-gray-500 text-sm">
          <li><i class="fas fa-envelope mr-2"></i> contact@cinemabooking.com</li>
          <li><i class="fas fa-phone mr-2"></i> +48 123 456 789</li>
        </ul>
      </div>
      <div>
        <h4 class="text-white font-bold uppercase mb-6 text-sm tracking-wider">Social Media</h4>
        <div class="flex space-x-4">
          <a href="#" class="w-10 h-10 rounded-full bg-gray-900 flex items-center justify-center text-white hover:bg-cinema-accent transition"><i class="fab fa-facebook-f"></i></a>
          <a href="#" class="w-10 h-10 rounded-full bg-gray-900 flex items-center justify-center text-white hover:bg-cinema-accent transition"><i class="fab fa-instagram"></i></a>
        </div>
      </div>
    </div>
    <div class="border-t border-gray-900 pt-8 text-center text-gray-600 text-xs">
      &copy; 2026 Cinema Booking by Jakub Pawiński. All rights reserved.
    </div>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
  window.addEventListener('scroll', function() {
    const nav = document.getElementById('mainNav');
    if (window.scrollY > 50) {
      nav.classList.add('navbar-scrolled');
      nav.classList.remove('py-4');
      nav.classList.add('py-2');
    } else {
      nav.classList.remove('navbar-scrolled');
      nav.classList.add('py-4');
      nav.classList.remove('py-2');
    }
  });
</script>
</body>
</html>