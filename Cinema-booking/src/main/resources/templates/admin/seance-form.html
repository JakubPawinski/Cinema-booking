<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
  <title>Planowanie Seansu</title>
</head>
<body>

<div layout:fragment="content">
  <div class="container mx-auto px-6 py-12 max-w-2xl">

    <h1 class="text-3xl font-bold font-serif text-white mb-8 border-l-4 border-cinema-accent pl-4">
      ZAPLANUJ NOWY SEANS
    </h1>

    <div th:if="${error}" class="bg-red-900/50 border border-red-500 text-red-200 p-4 rounded mb-6 flex items-center">
      <i class="fas fa-exclamation-triangle mr-3 text-xl"></i>
      <span th:text="${error}">Błąd walidacji</span>
    </div>

    <form th:action="@{/admin/seances/add}" th:object="${seance}" method="post"
          class="space-y-6 bg-cinema-dark p-8 rounded-xl border border-gray-800 shadow-2xl">

      <div>
        <label class="block text-gray-400 mb-2 text-sm">Wybierz Film</label>
        <select th:field="*{movieId}" required
                class="w-full bg-black border border-gray-700 rounded p-3 text-white focus:border-cinema-accent focus:outline-none">
          <option value="" disabled selected>-- Wybierz film z listy --</option>
          <option th:each="movie : ${movies}"
                  th:value="${movie.id}"
                  th:text="${movie.title} + ' (' + ${movie.durationMin} + ' min)'">Avatar</option>
        </select>
        <p class="text-xs text-gray-500 mt-1">Czas zakończenia zostanie obliczony automatycznie na podstawie długości filmu.</p>
      </div>

      <div>
        <label class="block text-gray-400 mb-2 text-sm">Wybierz Salę</label>
        <select th:field="*{roomId}" required
                class="w-full bg-black border border-gray-700 rounded p-3 text-white focus:border-cinema-accent focus:outline-none">
          <option value="" disabled selected>-- Wybierz salę --</option>
          <option th:each="room : ${rooms}"
                  th:value="${room.id}"
                  th:text="${room.name}">Sala 1</option>
        </select>
      </div>

      <div>
        <label class="block text-gray-400 mb-2 text-sm">Data i Godzina Rozpoczęcia</label>
        <input type="datetime-local" th:field="*{startTime}" required
               class="w-full bg-black border border-gray-700 rounded p-3 text-white focus:border-cinema-accent focus:outline-none appearance-none">
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label class="block text-gray-400 mb-2 text-sm">Cena Biletu Normalnego (PLN)</label>
          <input type="number" step="0.01" th:field="*{regularTicketPrice}" required placeholder="25.00"
                 class="w-full bg-black border border-gray-700 rounded p-3 text-white focus:border-cinema-accent focus:outline-none">
        </div>
        <div>
          <label class="block text-gray-400 mb-2 text-sm">Cena Biletu Ulgowego (PLN)</label>
          <input type="number" step="0.01" th:field="*{reducedTicketPrice}" required placeholder="18.50"
                 class="w-full bg-black border border-gray-700 rounded p-3 text-white focus:border-cinema-accent focus:outline-none">
        </div>
      </div>

      <div class="flex justify-end gap-4 pt-4 border-t border-gray-800">
        <a th:href="@{/admin/seances}" class="px-6 py-3 rounded border border-gray-600 text-gray-400 hover:text-white transition no-underline">
          Anuluj
        </a>
        <button type="submit" class="bg-cinema-accent hover:bg-cinema-accentHover text-white px-8 py-3 rounded font-bold transition shadow-lg cursor-pointer border-0">
          <i class="fas fa-calendar-check mr-2"></i> Utwórz Seans
        </button>
      </div>
    </form>
  </div>
</div>

</body>
</html>
