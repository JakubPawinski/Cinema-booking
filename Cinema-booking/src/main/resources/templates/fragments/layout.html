<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Dynamic title pattern for child templates -->
  <title layout:title-pattern="$CONTENT_TITLE - Cinema Booking">Cinema Booking</title>

  <!-- External Resources: Google Fonts, Bootstrap & FontAwesome -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800&family=Playfair+Display:ital,wght@1,700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Tailwind CSS Configuration: Custom branding colors and typography -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            cinema: {
              black: '#0a0a0a',
              dark: '#141414',
              accent: '#9333ea',
              accentHover: '#7e22ce',
              gold: '#fbbf24',
              text: '#e0e0e0'
            }
          },
          fontFamily: {
            sans: ['Montserrat', 'sans-serif'],
            serif: ['Playfair Display', 'serif'],
          }
        }
      },
      corePlugins: {
        preflight: false, // Prevents Tailwind from overriding Bootstrap's base styles
      }
    }
  </script>

  <!-- Global Styles: Custom scrollbars and navigation states -->
  <style>
    body {
      background-color: #0a0a0a;
      color: #ffffff;
      font-family: 'Montserrat', sans-serif;
    }
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #141414; }
    ::-webkit-scrollbar-thumb { background: #2f2f2f; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #9333ea; }

    a { text-decoration: none; color: inherit; }
    a:hover { color: inherit; }

    .dropdown-toggle::after { vertical-align: middle; }

    /* Sticky header effect applied via JavaScript on scroll */
    .navbar-scrolled {
      background-color: rgba(10, 10, 10, 0.95);
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 20px rgba(147, 51, 234, 0.15);
    }
    button:focus {
      outline: none;
    }
  </style>
</head>
<body class="flex flex-col min-h-screen">

<!-- Reusable Header Fragment -->
<div th:replace="~{fragments/header :: header-nav}"></div>

<!-- Main Content Area: Placeholder for child page views -->
<main class="flex-grow">
  <div layout:fragment="content">
  </div>
</main>

<!-- Reusable Footer Fragment -->
<div th:replace="~{fragments/footer :: footer}"></div>

<!-- Core Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
  /**
   * Navbar Scroll Interaction
   */
  window.addEventListener('scroll', function() {
    const nav = document.getElementById('mainNav');
    if (nav) {
      if (window.scrollY > 50) {
        nav.classList.add('navbar-scrolled');
        nav.classList.remove('py-4');
        nav.classList.add('py-2');
      } else {
        nav.classList.remove('navbar-scrolled');
        nav.classList.add('py-4');
        nav.classList.remove('py-2');
      }
    }
  });
</script>
</body>
</html>
